//	QuipoJS 1.1 ~ Copyright (c) 2012 Cedrik Boudreau. Released under MIT license.
//	http://www.studioquipo.com
var Qjs=(function(){var j=Object.prototype,EMPTY_ARRAY=[],PARENT_NODE='parentNode',slice=EMPTY_ARRAY.slice,DEFAULT={TYPE:'GET',MIME:'json'},MIME_TYPES={script:'text/javascript, application/javascript',json:'application/json',xml:'application/xml, text/xml',html:'text/html',text:'text/plain'},JSONP_ID=0,SHORTCUTS=['touch','tap'],SHORTCUTS_EVENTS={touch:'touchstart',tap:'tap'},READY_EXPRESSION=/complete|loaded|interactive/,ELEMENT_ID=1,HANDLERS={},EVENT_METHODS={preventDefault:'isDefaultPrevented',stopImmediatePropagation:'isImmediatePropagationStopped',stopPropagation:'isPropagationStopped'},EVENTS_DESKTOP={touchstart:'mousedown',touchmove:'mousemove',touchend:'mouseup',tap:'click',doubletap:'dblclick',orientationchange:'resize'},TOUCH={},TOUCH_TIMEOUT,LONGTAP_DELAY=750,GESTURES=['swipe','swipeLeft','swipeRight','swipeUp','swipeDown','doubleTap','longTap'],IS_WEBKIT=/WebKit\/([\d.]+)/,SUPPORTED_OS={android:/(Android)\s+([\d.]+)/,ipad:/(iPad).*OS\s([\d_]+)/,iphone:/(iPhone\sOS)\s([\d_]+)/,blackberry:/(BlackBerry).*Version\/([\d.]+)/,webos:/(webOS|hpwOS)[\s\/]([\d.]+)/},CURRENT_ENVIRONMENT=null;function Q(a,b){a=a||EMPTY_ARRAY;a.__proto__=Q.prototype;a.selector=b||'';return a};function $(a,b){return a?Q($.getDomainSelector(a,b),a):Q()};$.extend=function(b,c){Array.prototype.slice.call(arguments,1).forEach(function(a){for(key in a)b[key]=a[key]});return b};$.each=function(a,b){var i,key;if($.toType(a)==='array')for(i=0;i<a.length;i++){if(b.call(a[i],i,a[i])===false)return a}else for(key in a){if(b.call(a[key],key,a[key])===false)return a}return a};$.mix=function(){var a={};for(var b=0,len=arguments.length;b<len;b++){var c=arguments[b];for(var d in c){if($.isOwnProperty(c,d)&&c[d]!==undefined){a[d]=c[d]}}}return a};$.toType=function(a){return j.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()};$.isOwnProperty=function(a,b){return j.hasOwnProperty.call(a,b)};$.getDomainSelector=function(a,b){var c=null;var d=[1,9,11];var e=$.toType(a);if(e==='array'){c=_compact(a)}else if(e==='string'){c=$.query(b||document,a)}else if(d.indexOf(a.nodeType)>=0||a===window){c=[a];a=null}return c};$.map=function(a,b){var c=[];var i;var d;if($.toType(a)==='array'){for(i=0;i<a.length;i++){var e=b(a[i],i);if(e!=null)c.push(e)}}else{for(d in a){e=b(a[d],d);if(e!=null)c.push(e)}}return _flatten(c)};$.isMobile=function(){CURRENT_ENVIRONMENT=CURRENT_ENVIRONMENT||_detectEnvironment();return CURRENT_ENVIRONMENT.isMobile};$.environment=function(){CURRENT_ENVIRONMENT=CURRENT_ENVIRONMENT||_detectEnvironment();return CURRENT_ENVIRONMENT};$.isOnline=function(){return(navigator.onLine)};$.query=function(a,b){if($.toType(a)==='array'){var c=[];for(var i=0,il=a.length;i<il;i++){c=c.concat(Array.prototype.slice.call(a[i].querySelectorAll(b)))}return c}return Array.prototype.slice.call(a.querySelectorAll(b))};$.ajaxSettings={type:DEFAULT.TYPE,async:true,success:{},error:{},context:null,dataType:DEFAULT.MIME,headers:{},xhr:function(){return new window.XMLHttpRequest()},crossDomain:false,timeout:0};$.ajax=function(a){var b=$.mix($.ajaxSettings,a);if(_isJsonP(b.url))return $.jsonp(b);var c=b.xhr();c.onreadystatechange=function(){if(c.readyState===4){clearTimeout(d);_xhrStatus(c,b)}}c.open(b.type,b.url,b.async);_xhrHeaders(c,b);if(b.timeout>0){var d=setTimeout(function(){_xhrTimeout(c,b)},b.timeout)}c.send(b.data);return(b.async)?c:_parseResponse(c,b)};$.jsonp=function(b){var c='jsonp'+(++JSONP_ID);var d=document.createElement('script');var e={abort:function(){$(d).remove();if(c in window)window[c]={}}};var f;window[c]=function(a){clearTimeout(f);$(d).remove();delete window[c];_xhrSuccess(a,e,b)};d.src=b.url.replace(/=\?/,'='+c);$('head').append(d);if(b.timeout>0){f=setTimeout(function(){_xhrTimeout(e,b)},b.timeout)}return e};$.get=function(a,b,c,d){a+=$.serializeParameters(b);return $.ajax({url:a,success:c,dataType:d})};$.post=function(a,b,c,d){return $.ajax({type:'POST',url:a,data:b,success:c,dataType:d,contentType:'application/x-www-form-urlencoded'})};$.json=function(a,b,c){a+=$.serializeParameters(b);return $.ajax({url:a,success:c,dataType:DEFAULT.MIME})};$.serializeParameters=function(a){var b='?';for(var c in a){if(a.hasOwnProperty(c)){if(b!=='?')b+='&';b+=c+'='+a[c]}}return(b==='?')?'':b};$.Event=function(a,b){var c=document.createEvent('Events');c.initEvent(a,true,true,null,null,null,null,null,null,null,null,null,null,null,null);return c};Q.prototype=$.fn={forEach:EMPTY_ARRAY.forEach,indexOf:EMPTY_ARRAY.indexOf,map:function(b){return $.map(this,function(a,i){return b.call(a,i,a)})},slice:function(){return $(slice.apply(this,arguments))},instance:function(a){return this.map(function(){return this[a]})},filter:function(b){return $([].filter.call(this,function(a){return a.parentNode&&$.query(a.parentNode,b).indexOf(a)>=0}))},attr:function(a,b){if($.toType(a)==='string'&&b===undefined){return this[0].getAttribute(a)}else{return this.each(function(){this.setAttribute(a,b)})}},removeAttr:function(a){return this.each(function(){if(this.nodeType===1)this.removeAttribute(a)})},data:function(a,b){return this.attr('data-'+a,b)},val:function(a){if($.toType(a)==='string'){return this.each(function(){this.value=a})}else{return(this.length>0?this[0].value:null)}},show:function(){return this.style('display','block')},hide:function(){return this.style('display','none')},height:function(){var a=this.offset();return a.height},width:function(){var a=this.offset();return a.width},offset:function(){var a=this[0].getBoundingClientRect();return{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset,width:a.width,height:a.height}},remove:function(){return this.each(function(){if(this.parentNode!=null){this.parentNode.removeChild(this)}})},text:function(a){return(!a)?this[0].textContent:this.each(function(){this.textContent=a})},html:function(a){return($.toType(a)==='string')?this.each(function(){this.innerHTML=a}):this[0].innerHTML},append:function(b){return this.each(function(){if($.toType(b)==='string'){if(b){var a=document.createElement('div');a.innerHTML=b;this.appendChild(a.firstChild)}}else{this.insertBefore(b)}})},prepend:function(b){return this.each(function(){if($.toType(b)==='string'){this.innerHTML=b+this.innerHTML}else{var a=this.parentNode;a.insertBefore(b,a.firstChild)}})},empty:function(){return this.each(function(){this.innerHTML=null})},parent:function(a){var b=(a)?_findAncestors(this):this.instance(PARENT_NODE);return _filtered(b,a)},siblings:function(d){var e=this.map(function(b,c){return Array.prototype.slice.call(c.parentNode.children).filter(function(a){return a!==c})});return _filtered(e,d)},children:function(a){var b=this.map(function(){return Array.prototype.slice.call(this.children)});return _filtered(b,a)},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},index:function(a){return a?this.indexOf($(a)[0]):this.parent().children().indexOf(this[0])},get:function(a){return a===undefined?this:this[a]},first:function(){return $(this[0])},last:function(){var a=this.length-1;return $(this[a])},closest:function(a,b){var c=this[0];var d=$(a);if(!d.length)c=null;while(c&&d.indexOf(c)<0){c=c!==b&&c!==document&&c.parentNode}return $(c)},each:function(c){this.forEach(function(a,b){c.call(a,b,a)});return this},addClass:function(a){return this.each(function(){if(!_existsClass(a,this.className)){this.className+=' '+a}})},removeClass:function(a){return this.each(function(){if(_existsClass(a,this.className)){this.className=this.className.replace(a,' ').replace(/\s+/gi,' ')}})},toggleClass:function(a){return this.each(function(){if(_existsClass(a,this.className)){this.className=this.className.replace(a,' ')}else{this.className+=' '+a}})},hasClass:function(a){return _existsClass(a,this[0].className)},style:function(a,b){return(!b)?this[0].style[a]||_computedStyle(this[0],a):this.each(function(){this.style[a]=b})},on:function(a,b,c){return(b===undefined||$.toType(b)==='function')?this.bind(a,b):this.delegate(b,a,c)},off:function(a,b,c){return(b===undefined||$.toType(b)==='function')?this.unbind(a,b):this.undelegate(b,a,c)},ready:function(a){if(READY_EXPRESSION.test(document.readyState)){a($)}else{document.addEventListener('DOMContentLoaded',function(){a($)},false)}return this},bind:function(a,b){return this.each(function(){_subscribe(this,a,b)})},unbind:function(a,b){return this.each(function(){_unsubscribe(this,a,b)})},delegate:function(f,g,h){return this.each(function(i,d){_subscribe(d,g,h,f,function(c){return function(e){var a=$(e.target).closest(f,d).get(0);if(a){var b=$.extend(_createProxy(e),{currentTarget:a,liveFired:d});return c.apply(a,[b].concat([].slice.call(arguments,1)))}}})})},undelegate:function(a,b,c){return this.each(function(){_unsubscribe(this,b,c,a)})},trigger:function(a){if($.toType(a)==='string')a=$.Event(a);return this.each(function(){this.dispatchEvent(a)})},serializeArray:function(){var b=[],el;$(slice.call(this.get(0).elements)).each(function(){el=$(this);var a=el.attr('type');if(this.nodeName.toLowerCase()!='fieldset'&&!this.disabled&&a!='submit'&&a!='reset'&&a!='button'&&((a!='radio'&&a!='checkbox')||this.checked)){b.push({name:el.attr('name'),value:el.val()})}});return b},serialize:function(){var b=[];this.serializeArray().forEach(function(a){b.push(encodeURIComponent(a.name)+'='+encodeURIComponent(a.value))});return b.join('&')}};function _compact(b){return b.filter(function(a){return a!==undefined&&a!==null})}function _flatten(a){return a.length>0?[].concat.apply([],a):a}function _detectEnvironment(){var a=navigator.userAgent;var b={};b.browser=_detectBrowser(a);b.os=_detectOS(a);b.isMobile=(b.os)?true:false;b.screen=_detectScreen();return b}function _detectBrowser(a){var b=a.match(IS_WEBKIT);return(b)?b[0]:a}function _detectOS(a){var b;for(os in SUPPORTED_OS){var c=a.match(SUPPORTED_OS[os]);if(c){b={name:(os==='iphone'||os==='ipad')?'ios':os,version:c[2].replace('_','.')}break}}return b}function _detectScreen(){return{width:window.innerWidth,height:window.innerHeight}}function _findAncestors(b){var c=[]while(b.length>0){b=$.map(b,function(a){if((a=a.parentNode)&&a!==document&&c.indexOf(a)<0){c.push(a);return a}})}return c}function _filtered(a,b){return(b===undefined)?$(a):$(a).filter(b)}function _existsClass(a,b){var c=b.split(/\s+/g);return(c.indexOf(a)>=0)}function _computedStyle(a,b){return document.defaultView.getComputedStyle(a,'')[b]}function _xhrStatus(a,b){if(a.status===200||a.status===0){if(b.async){var c=_parseResponse(a,b);_xhrSuccess(c,a,b)}}else{_xhrError('QjsJS » $.ajax',a,b)}}function _xhrSuccess(a,b,c){c.success.call(c.context,a,b)}function _xhrError(a,b,c){c.error.call(c.context,a,b,c)}function _xhrHeaders(a,b){if(b.contentType)b.headers['Content-Type']=b.contentType;if(b.dataType)b.headers['Accept']=MIME_TYPES[b.dataType];for(header in b.headers){a.setRequestHeader(header,b.headers[header])}}function _xhrTimeout(a,b){a.onreadystatechange={};a.abort();_xhrError('QjsJS » $.ajax : timeout exceeded',a,b)}function _parseResponse(a,b){var c=a.responseText;if(c){if(b.dataType===DEFAULT.MIME){try{c=JSON.parse(c)}catch(error){c=error;_xhrError('Parse Error',a,b)}}else if(b.dataType==='xml'){c=a.responseXML}}return c}function _isJsonP(a){return(/=\?/.test(a))}SHORTCUTS.forEach(function(b){$.fn[b]=function(a){$(document.body).delegate(this.selector,SHORTCUTS_EVENTS[b],a);return this}});function _subscribe(a,b,c,d,e){b=_environmentEvent(b);var f=_getElementId(a);var g=HANDLERS[f]||(HANDLERS[f]=[]);var h=e&&e(c,b);var i={event:b,callback:c,selector:d,proxy:_createProxyCallback(h,c,a),delegate:h,index:g.length};g.push(i);a.addEventListener(i.event,i.proxy,false)}function _unsubscribe(b,c,d,e){c=_environmentEvent(c);var f=_getElementId(b);_findHandlers(f,c,d,e).forEach(function(a){delete HANDLERS[f][a.index];b.removeEventListener(a.event,a.proxy,false)})}function _getElementId(a){return a._id||(a._id=ELEMENT_ID++)}function _environmentEvent(a){var b=($.isMobile())?a:EVENTS_DESKTOP[a];return(b)||a}function _createProxyCallback(c,d,e){var d=c||d;var f=function(a){var b=d.apply(e,[a].concat(a.data));if(b===false){a.preventDefault()}return b};return f}function _findHandlers(b,c,d,e){return(HANDLERS[b]||[]).filter(function(a){return a&&(!c||a.event==c)&&(!d||a.fn==d)&&(!e||a.selector==e)})}function _createProxy(c){var d=$.extend({originalEvent:c},c);$.each(EVENT_METHODS,function(a,b){d[a]=function(){this[b]=function(){return true};return c[a].apply(c,arguments)};d[b]=function(){return false}})return d}GESTURES.forEach(function(b){$.fn[b]=function(a){return this.on(b,a)}});$(document).ready(function(){_listenTouches()});function _listenTouches(){var a=$(document.body);a.bind('touchstart',_onTouchStart);a.bind('touchmove',_onTouchMove);a.bind('touchend',_onTouchEnd);a.bind('touchcancel',_onTouchCancel)}function _onTouchStart(a){var b=Date.now();var c=b-(TOUCH.last||b);var d=($.isMobile())?a.touches[0]:a;TOUCH_TIMEOUT&&clearTimeout(TOUCH_TIMEOUT);TOUCH={el:$(_parentIfText(d.target)),x1:d.pageX,y1:d.pageY,isDoubleTap:(c>0&&c<=250)?true:false,last:b}setTimeout(_longTap,LONGTAP_DELAY)}function _onTouchMove(a){var b=($.isMobile())?a.touches[0]:a;TOUCH.x2=b.pageX;TOUCH.y2=b.pageY}function _onTouchEnd(a){if(TOUCH.isDoubleTap){TOUCH.el.trigger('doubleTap');TOUCH={}}else if(TOUCH.x2>0||TOUCH.y2>0){(Math.abs(TOUCH.x1-TOUCH.x2)>30||Math.abs(TOUCH.y1-TOUCH.y2)>30)&&TOUCH.el.trigger('swipe')&&TOUCH.el.trigger('swipe'+(_swipeDirection(TOUCH.x1,TOUCH.x2,TOUCH.y1,TOUCH.y2)));TOUCH.x1=TOUCH.x2=TOUCH.y1=TOUCH.y2=TOUCH.last=0;TOUCH={}}else{if(TOUCH.el!==undefined){TOUCH.el.trigger('tap')}TOUCH_TIMEOUT=setTimeout(function(){TOUCH_TIMEOUT=null;TOUCH={}},250)}}function _onTouchCancel(a){TOUCH={};clearTimeout(TOUCH_TIMEOUT)}function _parentIfText(a){return'tagName'in a?a:a.parentNode}function _swipeDirection(a,b,c,d){var e=Math.abs(a-b);var f=Math.abs(c-d);if(e>=f){return(a-b>0?'Left':'Right')}else{return(c-d>0?'Up':'Down')}}function _longTap(){if(TOUCH.last&&(Date.now()-TOUCH.last>=LONGTAP_DELAY)){TOUCH.el.trigger('longTap');TOUCH={}}}return $})();window.Qjs=Qjs;'$'in window||(window.$=Qjs);